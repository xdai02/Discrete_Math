**分类加法计数原理**

完成一件事有$ n $种不同的方案，其中第$ 1 $种方案有$ m_1 $种不同方法，第$ 2 $种方案有$ m_2 $种不同方法，$ \dots $，第$ n $种方案有$ m_n $种不同方法，那么完成这件事共有$ m_1 + m_2 + \dots + m_n $种不同方法。

---

【范例】从A地到B地，可以乘火车、汽车、飞机。火车有4班、汽车2班、飞机3班，那么一天中乘坐这些交通工具从A地到B地有多少种不同的走法？
$$
4 + 2 + 3 = 9
$$

---



**分步乘法计数原理**

完成一件事需要$ n $个步骤，其中第$ 1 $个步骤有$ m_1 $种不同方法，第$ 2 $个步骤有$ m_2 $种不同方法，$ \dots $，第$ n $个步骤有$ m_n $种不同方法，那么完成这件事共有$ m_1 \times m_2 \times \dots m_n $种不同方法。

---

【范例】一个书架的第1层有4本不同的计算机书，第2层有3本不同的经济书，第3层有2本不同的数学书。从书架的每一层各取一本书，有多少种不同取法？
$$
4 \times 3 \times 2 = 24
$$

---

<div style="page-break-after: always;"></div>

## 5.2 排列

**排列（Permutation）**

从$ n $个不同元素中取出$ m\ (m \le n) $ 个元素，按照一定次序排成一列，称为从$ n $个不同元素中取出$ m $个元素的一个排列。
$$
P_n^m = {n! \over (n-m)!}
$$
例如一共有8个人，A、B、C、D、E、F、G、H。现在有3个奖杯，分别为金牌、银牌和铜牌。将这3个奖牌颁发给8个人中的3个，问颁发奖牌的不同方式总共有几种？

很明显这是一个排列的问题，因为把金牌先颁给A，再把银牌颁给B，跟把金牌先颁给B，再把银牌颁给A 这是两种不同的颁奖方式。

> 第一步颁发金牌，金牌可以颁发给8个人中的1个，共有8种选择。
>
> 第二步颁发银牌，银牌可以颁发剩下7个人中的1个，共有7种选择。
>
> 第二步颁发铜牌，铜牌可以颁发剩下6个人中的1个，共有6种选择。

那么总共的颁奖方式共有$ 8 \times 7 \times 6 = 336 $种。

---

【范例】用0-9这10个数字可以组成多少个没有重复数字的三位数？

> 方法1

由于0没有排在百位上，那么百位只能是1-9这9个数字任选1个，有$ P_9^1 $种选法。

对于十位和个位，从余下的9个数字种选2个，有$ P_9^2 $种选法。

$ P_9^1 \times P_9^2 = 9 \times 9 \times 8 = 648 $



> 方法2

符合条件的三位数可以分为3大类：

1. 每一位数字都不是0的三位数，也就是从1-9中选3个，有$ P_9^3 $种选法。
2. 个位数字为0，那么需要从剩下9个数字中选2个作为十位和百位，有$ P_9^2 $种选法。
3. 十位数字为0，那么需要从剩下9个数字中选2个作为个位和百位，有$ P_9^2 $种选法。

$ P_9^3 + P_9^2 + P_9^2 = 648 $



> 方法3

利用容斥法。从0-9这10个数字任取3个数字的排列数为$ P_{10}^3 $，其中0在百位上（也就是从1-9中选2个作为十位和个位）的排列数是$ P_9^2 $。

$ P_{10}^3 - P_9^2 = 648 $

---

【代码】打印字符串"math"的全排列

```c
#include <stdio.h>
#include <string.h>

void swap(char *a, char *b) {
    char temp = *a;
    *a = *b;
    *b = temp;
}

void permutation(char *s, int start, int end) {
    if(start >= end) {
        printf("%s\n", s);
    } else {
        for(int i = start; i < end; i++) {
            swap(s + i, s + start);
            permutation(s, start + 1, end);
            swap(s + i, s + start);
        }
    }
}

int main() {
    char s[] = "math";
    int len = strlen(s);
    permutation(s, 0, len);
    return 0;
}
```

---

<div style="page-break-after: always;"></div>

## 5.3 组合

**组合（Combination）**

从$ n $个不同元素中取出$ m\ (m \le n) $ 个元素，称为从$ n $个不同元素中取出$ m $个元素的一个组合。

排列与组合的不同点在于，排列与元素的顺序有关，组合与元素的顺序无关。
$$
C_n^m = {P_n^m \over P_m^m} = {n! \over (n-m)!m!}
$$

---

【范例】在100件产品中，有98件合格品，2件次品，从这100件产品中任意抽出3件。

（1）有多少种不同的抽法？
$$
C_{100}^3 = {100 \times 99 \times 98 \over 3 \times 2 \times 1} = 161700
$$


（2）抽出的3件中恰好有1件事次品的抽法有多少种？

2件次品抽出1件有$ C_2^1 $种，再从98件合格品种抽出2件合格品有$ C_{98}^2 $种。
$$
C_2^1 \times C_{98}^2 = 9506
$$


（3）抽出的3件中至少有1件事次品的抽法有多少种？

> 方法1

恰好有1件次品有$ C_2^1 \times C_{98}^2 $种，恰好有2件次品有$ C_2^2 \times C_{98}^1 $种。
$$
C_2^1 \times C_{98}^2 + C_2^2 \times C_{98}^1 = 9604
$$

> 方法2

利用容斥法。先从100件抽出3件有$ C_{100}^3 $种，其中3件都是合格品有$ C_{98}^3 $种。
$$
C_{100}^3 - C_{98}^3 = 9604
$$

---

<div style="page-break-after: always;"></div>

## 5.4 古典概型

**古典概型**

如果一个随机试验所包含的单位事件是有限的，且每个单位事件发生的可能性均相等，则这个随机试验叫做拉普拉斯试验，这种条件下的概率模型就叫古典概型。古典概型是概率论中最直观和最简单的模型，概率的许多运算规则，也首先是在这种模型下得到的。

单位事件的特点是两两互斥的，例如抛一枚质地均匀的硬币时，正面朝上和背面朝上不会同时出现。

在古典概型中，概率的计算公式为：
$$
P(A) = {A\text{包含的单位事件个数}m \over \text{单位事件的总数}n}
$$

---

【范例】掷两个质地均匀的骰子

（1）一共有多少种不同的结果？

$ 6 \times 6 = 36 $



（2）点数之和为9的结果有多少种？

一共有4种：$ (3, 6), (6, 3), (4, 5), (5, 4) $



（3）点数之和为9的概率是多少？

$ P(A) = {4 \over 36} = {1 \over 9} $
